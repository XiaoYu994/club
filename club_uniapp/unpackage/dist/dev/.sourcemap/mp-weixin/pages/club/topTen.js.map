{"version":3,"file":"topTen.js","sources":["pages/club/topTen.vue","../../../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2x1Yi90b3BUZW4udnVl"],"sourcesContent":["<template>\r\n  <view class=\"club-container pageBg\">\r\n    <!-- 顶部导航 -->\r\n    <custom-nav-bar title=\"十佳社团\" :showBack=\"true\" @backClick=\"goBack\"></custom-nav-bar>\r\n    <!-- 十佳社团列表 -->\r\n    <scroll-view scroll-y class=\"club-list\" :show-scrollbar=\"false\">\r\n      <view class=\"list-container\">\r\n        <view\r\n          v-for=\"(item, idx) in clubList\"\r\n          :key=\"idx\"\r\n          class=\"club-card\"\r\n          @tap=\"goToDetail(item)\"\r\n        >\r\n          <image class=\"club-logo\" :src=\"item.logo || '/static/images/default-club.png'\" mode=\"aspectFill\"></image>\r\n          <view class=\"club-info\">\r\n            <view class=\"club-header\">\r\n              <view class=\"club-name\">{{ item.name }}</view>\r\n              <view class=\"club-type-tag\" :class=\"getTypeClass(item.type)\">{{ getTypeText(item.type) }}</view>\r\n            </view>\r\n            <view class=\"club-desc\">{{ item.description || '暂无简介' }}</view>\r\n            <view class=\"club-meta\">\r\n              <view class=\"meta-item\">\r\n                <uni-icons type=\"person\" size=\"14\" color=\"#666\"></uni-icons>\r\n                <text>{{ item.memberCount || 0 }}名成员</text>\r\n              </view>\r\n              <view class=\"meta-item\">\r\n                <uni-icons type=\"location\" size=\"14\" color=\"#666\"></uni-icons>\r\n                <text>{{ item.address || '暂无地址' }}</text>\r\n              </view>\r\n            </view>\r\n            <view class=\"club-stats\">\r\n              <view class=\"view-count\">\r\n                <uni-icons type=\"eye\" size=\"14\" color=\"#999\"></uni-icons>\r\n                <text>{{ item.viewCount || 0 }}</text>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </scroll-view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, getCurrentInstance } from 'vue'\r\nimport CustomNavBar from '@/components/custom-nav-bar/custom-nav-bar.vue'\r\nconst { proxy } = getCurrentInstance()\r\n\r\n// 列表数据\r\nconst clubList = ref([])\r\n\r\n// 获取十佳社团\r\nconst loadTopTen = async () => {\r\n  try {\r\n    // 重用社团列表接口，取前10条，按order_num升序\r\n    const params = { pageNo: 1, pageSize: 10, orderBy: 'order_num', isAsc: true }\r\n    const res = await proxy.$api.club.getClubList(params)\r\n    if (res.code === 200) {\r\n      clubList.value = res.data.list || []\r\n    } else {\r\n      uni.showToast({ title: res.msg || '加载失败', icon: 'none' })\r\n    }\r\n  } catch (error) {\r\n    console.error('获取十佳社团失败', error)\r\n    uni.showToast({ title: '网络异常，请稍后重试', icon: 'none' })\r\n  }\r\n}\r\n\r\n// 跳转到社团详情\r\nconst goToDetail = (item) => {\r\n  uni.navigateTo({ url: `/pages/club/detail?id=${item.id}` })\r\n}\r\n\r\n// 返回上一页\r\nconst goBack = () => {\r\n  uni.navigateBack()\r\n}\r\n\r\n// 类型文本\r\nconst getTypeText = (type) => {\r\n  switch (type) {\r\n    case 0: return '普通社团'\r\n    case 1: return '院级社团'\r\n    case 2: return '校级社团'\r\n    default: return '未知类型'\r\n  }\r\n}\r\n// 类型样式\r\nconst getTypeClass = (type) => {\r\n  switch (type) {\r\n    case 0: return 'normal'\r\n    case 1: return 'college'\r\n    case 2: return 'school'\r\n    default: return ''\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  loadTopTen()\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.club-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n}\r\n.club-list {\r\n  flex: 1;\r\n  padding: 20rpx 30rpx;\r\n  box-sizing: border-box;\r\n  /* 隐藏滚动条 */\r\n  &::-webkit-scrollbar { width: 0; display: none; }\r\n  scrollbar-width: none;\r\n  -ms-overflow-style: none;\r\n}\r\n.list-container {\r\n  padding-bottom: 40rpx;\r\n}\r\n.club-card {\r\n  margin-bottom: 30rpx;\r\n  background: #fff;\r\n  border-radius: 18rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 2rpx 12rpx rgba(0,0,0,0.08);\r\n  display: flex;\r\n  padding: 24rpx;\r\n  position: relative;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n.club-logo {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  border-radius: 60rpx;\r\n  flex-shrink: 0;\r\n  margin-right: 24rpx;\r\n  object-fit: cover;\r\n}\r\n.club-info {\r\n  flex: 1;\r\n  overflow: hidden;\r\n  .club-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 12rpx;\r\n    .club-name {\r\n      font-size: 32rpx;\r\n      font-weight: 600;\r\n      color: #333;\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      flex: 1;\r\n    }\r\n    .club-type-tag {\r\n      padding: 4rpx 16rpx;\r\n      border-radius: 20rpx;\r\n      font-size: 20rpx;\r\n      &.normal { color: #666; background: #f5f5f5; }\r\n      &.college { color: #2979ff; background: rgba(41,121,255,0.1); }\r\n      &.school { color: #b13b7a; background: rgba(177,59,122,0.1); }\r\n    }\r\n  }\r\n  .club-desc {\r\n    font-size: 26rpx;\r\n    color: #666;\r\n    margin-bottom: 16rpx;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 2;\r\n    -webkit-box-orient: vertical;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    line-height: 1.4;\r\n  }\r\n  .club-meta {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    .meta-item {\r\n      display: flex;\r\n      align-items: center;\r\n      font-size: 24rpx;\r\n      color: #666;\r\n      margin-right: 30rpx;\r\n      text { margin-left: 8rpx; }\r\n    }\r\n  }\r\n  .club-stats {\r\n    display: flex;\r\n    .view-count {\r\n      display: flex;\r\n      align-items: center;\r\n      font-size: 24rpx;\r\n      color: #999;\r\n      text { margin-left: 8rpx; }\r\n    }\r\n  }\r\n}\r\n</style> ","import MiniProgramPage from 'D:/CODE/capstone-project/club-master/club/club_uniapp/pages/club/topTen.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","ref","uni","onMounted"],"mappings":";;;;;;;;;;AA6CA,MAAM,eAAe,MAAW;;;;AAChC,UAAM,EAAE,MAAO,IAAGA,iCAAoB;AAGtC,UAAM,WAAWC,cAAG,IAAC,EAAE;AAGvB,UAAM,aAAa,YAAY;AAC7B,UAAI;AAEF,cAAM,SAAS,EAAE,QAAQ,GAAG,UAAU,IAAI,SAAS,aAAa,OAAO,KAAM;AAC7E,cAAM,MAAM,MAAM,MAAM,KAAK,KAAK,YAAY,MAAM;AACpD,YAAI,IAAI,SAAS,KAAK;AACpB,mBAAS,QAAQ,IAAI,KAAK,QAAQ,CAAE;AAAA,QAC1C,OAAW;AACLC,8BAAI,UAAU,EAAE,OAAO,IAAI,OAAO,QAAQ,MAAM,QAAQ;AAAA,QACzD;AAAA,MACF,SAAQ,OAAO;AACdA,sBAAAA,MAAA,MAAA,SAAA,+BAAc,YAAY,KAAK;AAC/BA,sBAAG,MAAC,UAAU,EAAE,OAAO,cAAc,MAAM,QAAQ;AAAA,MACpD;AAAA,IACH;AAGA,UAAM,aAAa,CAAC,SAAS;AAC3BA,0BAAI,WAAW,EAAE,KAAK,yBAAyB,KAAK,EAAE,IAAI;AAAA,IAC5D;AAGA,UAAM,SAAS,MAAM;AACnBA,oBAAAA,MAAI,aAAc;AAAA,IACpB;AAGA,UAAM,cAAc,CAAC,SAAS;AAC5B,cAAQ,MAAI;AAAA,QACV,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf;AAAS,iBAAO;AAAA,MACjB;AAAA,IACH;AAEA,UAAM,eAAe,CAAC,SAAS;AAC7B,cAAQ,MAAI;AAAA,QACV,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf;AAAS,iBAAO;AAAA,MACjB;AAAA,IACH;AAEAC,kBAAAA,UAAU,MAAM;AACd,iBAAY;AAAA,IACd,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClGD,GAAG,WAAW,eAAe;"}