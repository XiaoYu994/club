{"version":3,"file":"topTen.js","sources":["pages/club/topTen.vue","../../../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2x1Yi90b3BUZW4udnVl"],"sourcesContent":["<template>\n  <view class=\"club-container pageBg\">\n    <!-- 顶部导航 -->\n    <custom-nav-bar title=\"十佳社团\" :showBack=\"true\" @backClick=\"goBack\"></custom-nav-bar>\n    <!-- 十佳社团列表 -->\n    <scroll-view scroll-y class=\"club-list\" :show-scrollbar=\"false\">\n      <view class=\"list-container\">\n        <view\n          v-for=\"(item, idx) in clubList\"\n          :key=\"idx\"\n          class=\"club-card\"\n          @tap=\"goToDetail(item)\"\n        >\n          <image class=\"club-logo\" :src=\"item.logo || '/static/images/default-club.png'\" mode=\"aspectFill\"></image>\n          <view class=\"club-info\">\n            <view class=\"club-header\">\n              <view class=\"club-name\">{{ item.name }}</view>\n              <view class=\"club-type-tag\" :class=\"getTypeClass(item.type)\">{{ getTypeText(item.type) }}</view>\n            </view>\n            <view class=\"club-desc\">{{ item.description || '暂无简介' }}</view>\n            <view class=\"club-meta\">\n              <view class=\"meta-item\">\n                <uni-icons type=\"person\" size=\"14\" color=\"#666\"></uni-icons>\n                <text>{{ item.memberCount || 0 }}名成员</text>\n              </view>\n              <view class=\"meta-item\">\n                <uni-icons type=\"location\" size=\"14\" color=\"#666\"></uni-icons>\n                <text>{{ item.address || '暂无地址' }}</text>\n              </view>\n            </view>\n            <view class=\"club-stats\">\n              <view class=\"view-count\">\n                <uni-icons type=\"eye\" size=\"14\" color=\"#999\"></uni-icons>\n                <text>{{ item.viewCount || 0 }}</text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, getCurrentInstance } from 'vue'\nimport CustomNavBar from '@/components/custom-nav-bar/custom-nav-bar.vue'\nconst { proxy } = getCurrentInstance()\n\n// 列表数据\nconst clubList = ref([])\n\n// 获取十佳社团\nconst loadTopTen = async () => {\n  try {\n    // 重用社团列表接口，取前10条，按order_num升序\n    const params = { pageNo: 1, pageSize: 10, orderBy: 'order_num', isAsc: true }\n    const res = await proxy.$api.club.getClubList(params)\n    if (res.code === 200) {\n      clubList.value = res.data.list || []\n    } else {\n      uni.showToast({ title: res.msg || '加载失败', icon: 'none' })\n    }\n  } catch (error) {\n    console.error('获取十佳社团失败', error)\n    uni.showToast({ title: '网络异常，请稍后重试', icon: 'none' })\n  }\n}\n\n// 跳转到社团详情\nconst goToDetail = (item) => {\n  uni.navigateTo({ url: `/pages/club/detail?id=${item.id}` })\n}\n\n// 返回上一页\nconst goBack = () => {\n  uni.navigateBack()\n}\n\n// 类型文本\nconst getTypeText = (type) => {\n  switch (type) {\n    case 0: return '普通社团'\n    case 1: return '院级社团'\n    case 2: return '校级社团'\n    default: return '未知类型'\n  }\n}\n// 类型样式\nconst getTypeClass = (type) => {\n  switch (type) {\n    case 0: return 'normal'\n    case 1: return 'college'\n    case 2: return 'school'\n    default: return ''\n  }\n}\n\nonMounted(() => {\n  loadTopTen()\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.club-container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n}\n.club-list {\n  flex: 1;\n  padding: 20rpx 30rpx;\n  box-sizing: border-box;\n  /* 隐藏滚动条 */\n  &::-webkit-scrollbar { width: 0; display: none; }\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n.list-container {\n  padding-bottom: 40rpx;\n}\n.club-card {\n  margin-bottom: 30rpx;\n  background: #fff;\n  border-radius: 18rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 12rpx rgba(0,0,0,0.08);\n  display: flex;\n  padding: 24rpx;\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n.club-logo {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 60rpx;\n  flex-shrink: 0;\n  margin-right: 24rpx;\n  object-fit: cover;\n}\n.club-info {\n  flex: 1;\n  overflow: hidden;\n  .club-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 12rpx;\n    .club-name {\n      font-size: 32rpx;\n      font-weight: 600;\n      color: #333;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      flex: 1;\n    }\n    .club-type-tag {\n      padding: 4rpx 16rpx;\n      border-radius: 20rpx;\n      font-size: 20rpx;\n      &.normal { color: #666; background: #f5f5f5; }\n      &.college { color: #2979ff; background: rgba(41,121,255,0.1); }\n      &.school { color: #b13b7a; background: rgba(177,59,122,0.1); }\n    }\n  }\n  .club-desc {\n    font-size: 26rpx;\n    color: #666;\n    margin-bottom: 16rpx;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    line-height: 1.4;\n  }\n  .club-meta {\n    display: flex;\n    flex-wrap: wrap;\n    .meta-item {\n      display: flex;\n      align-items: center;\n      font-size: 24rpx;\n      color: #666;\n      margin-right: 30rpx;\n      text { margin-left: 8rpx; }\n    }\n  }\n  .club-stats {\n    display: flex;\n    .view-count {\n      display: flex;\n      align-items: center;\n      font-size: 24rpx;\n      color: #999;\n      text { margin-left: 8rpx; }\n    }\n  }\n}\n</style> ","import MiniProgramPage from 'D:/CODE/capstone-project/club-master/club/club_uniapp/pages/club/topTen.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","ref","uni","onMounted"],"mappings":";;;;;;;;;;AA6CA,MAAM,eAAe,MAAW;;;;AAChC,UAAM,EAAE,MAAO,IAAGA,iCAAoB;AAGtC,UAAM,WAAWC,cAAG,IAAC,EAAE;AAGvB,UAAM,aAAa,YAAY;AAC7B,UAAI;AAEF,cAAM,SAAS,EAAE,QAAQ,GAAG,UAAU,IAAI,SAAS,aAAa,OAAO,KAAM;AAC7E,cAAM,MAAM,MAAM,MAAM,KAAK,KAAK,YAAY,MAAM;AACpD,YAAI,IAAI,SAAS,KAAK;AACpB,mBAAS,QAAQ,IAAI,KAAK,QAAQ,CAAE;AAAA,QAC1C,OAAW;AACLC,8BAAI,UAAU,EAAE,OAAO,IAAI,OAAO,QAAQ,MAAM,QAAQ;AAAA,QACzD;AAAA,MACF,SAAQ,OAAO;AACdA,sBAAAA,MAAA,MAAA,SAAA,+BAAc,YAAY,KAAK;AAC/BA,sBAAG,MAAC,UAAU,EAAE,OAAO,cAAc,MAAM,QAAQ;AAAA,MACpD;AAAA,IACH;AAGA,UAAM,aAAa,CAAC,SAAS;AAC3BA,0BAAI,WAAW,EAAE,KAAK,yBAAyB,KAAK,EAAE,IAAI;AAAA,IAC5D;AAGA,UAAM,SAAS,MAAM;AACnBA,oBAAAA,MAAI,aAAc;AAAA,IACpB;AAGA,UAAM,cAAc,CAAC,SAAS;AAC5B,cAAQ,MAAI;AAAA,QACV,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf;AAAS,iBAAO;AAAA,MACjB;AAAA,IACH;AAEA,UAAM,eAAe,CAAC,SAAS;AAC7B,cAAQ,MAAI;AAAA,QACV,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf;AAAS,iBAAO;AAAA,MACjB;AAAA,IACH;AAEAC,kBAAAA,UAAU,MAAM;AACd,iBAAY;AAAA,IACd,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClGD,GAAG,WAAW,eAAe;"}