{"version":3,"file":"myApplies.js","sources":["pages/user/myApplies.vue","../../../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9teUFwcGxpZXMudnVl"],"sourcesContent":["<template>\n  <view class=\"my-applies\">\n    <custom-nav-bar title=\"我的申请\" :showBack=\"true\" @backClick=\"goBack\" />\n    <scroll-view\n      scroll-y\n      class=\"applies-list\"\n      refresher-enabled\n      :refresher-triggered=\"refreshing\"\n      @refresherrefresh=\"refreshApplies\"\n      @scrolltolower=\"loadMore\"\n      :show-scrollbar=\"false\"\n      enhanced\n    >\n      <view class=\"list-container\">\n        <view\n          v-for=\"(item, idx) in applyList\"\n          :key=\"idx\"\n          class=\"apply-card\"\n          @tap=\"goToDetail(item.clubId)\"\n        >\n          <view class=\"apply-header\">\n            <view class=\"club-info\">\n              <image \n                v-if=\"item.clubLogo\" \n                :src=\"item.clubLogo\" \n                class=\"club-logo\"\n                mode=\"aspectFill\"\n              />\n              <view class=\"club-text\">\n                <view class=\"club-name\">{{ item.clubName }}</view>\n                <view v-if=\"item.recruitmentTitle\" class=\"recruitment-title\">{{ item.recruitmentTitle }}</view>\n              </view>\n            </view>\n            <text :class=\"['apply-status', 'status-' + item.status]\">{{ getStatusText(item.status) }}</text>\n          </view>\n          \n          <view class=\"apply-details\">\n            <view class=\"detail-item\">\n              <text class=\"label\">申请时间：</text>\n              <text class=\"value\">{{ formatTime(Number.parseInt(item.createTime)) }}</text>\n            </view>\n            <view v-if=\"item.feedback\" class=\"detail-item\">\n              <text class=\"label\">反馈意见：</text>\n              <text class=\"value\">{{ item.feedback }}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view v-if=\"isLoading\" class=\"loading-more\">\n          <uni-icons type=\"spinner-cycle\" size=\"20\" color=\"#999\" />\n          <text>加载中...</text>\n        </view>\n        <view v-if=\"applyList.length === 0 && !isLoading\" class=\"empty-data\">\n          <text>暂无申请记录</text>\n        </view>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { getCurrentInstance } from 'vue'\nimport { formatTime } from '@/utils/common.js';\nconst { proxy } = getCurrentInstance()\n\nconst applyList = ref([])\nconst isLoading = ref(false)\nconst refreshing = ref(false)\n\nconst loadApplies = async () => {\n  if (isLoading.value) return;\n  isLoading.value = true;\n  try {\n    // 获取用户真正的社团申请记录\n    const res = await proxy.$api.club.getMyClubApplies();\n    console.log('申请数据:', res); // 调试信息\n    if (res.code === 200) {\n      applyList.value = res.data || [];\n      console.log('申请列表:', applyList.value); // 调试信息\n    } else {\n      console.error('获取申请记录失败：', res.message);\n      applyList.value = [];\n      uni.showToast({\n        title: res.message || '获取申请记录失败',\n        icon: 'none'\n      });\n    }\n  } catch (error) {\n    console.error('加载我的申请失败', error);\n    applyList.value = [];\n    uni.showToast({\n      title: '网络错误，请重试',\n      icon: 'none'\n    });\n  } finally {\n    isLoading.value = false;\n    refreshing.value = false;\n  }\n};\n\nconst refreshApplies = () => {\n  refreshing.value = true\n  loadApplies()\n}\n\nconst loadMore = () => {\n  // 暂不分页\n}\n\nconst getStatusText = (status) => {\n  switch (status) {\n    case 0: return '待审核';\n    case 1: return '已通过';\n    case 2: return '已拒绝';\n    case 3: return '已面试';\n    case 4: return '已入社';\n    default: return '未知';\n  }\n}\n\nconst goBack = () => {\n  uni.navigateBack()\n}\n\nconst goToDetail = (id) => {\n  uni.navigateTo({ url: `/pages/club/detail?id=${id}` })\n}\n\nonMounted(() => {\n  loadApplies()\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.apply-card {\n  padding: 20rpx;\n  margin: 20rpx;\n  border-radius: 12rpx;\n  background: #fff;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n}\n\n.apply-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 16rpx;\n}\n\n.club-info {\n  display: flex;\n  align-items: center;\n  flex: 1;\n}\n\n.club-logo {\n  width: 60rpx;\n  height: 60rpx;\n  border-radius: 8rpx;\n  margin-right: 16rpx;\n}\n\n.club-text {\n  flex: 1;\n}\n\n.club-name {\n  font-size: 32rpx;\n  font-weight: 500;\n  color: #333;\n  margin-bottom: 8rpx;\n}\n\n.recruitment-title {\n  font-size: 26rpx;\n  color: #666;\n}\n\n.apply-status {\n  padding: 8rpx 16rpx;\n  border-radius: 16rpx;\n  color: #fff;\n  font-size: 24rpx;\n  font-weight: 500;\n}\n\n.status-0 { background-color: #909399; }\n.status-1 { background-color: #67C23A; }\n.status-2 { background-color: #F56C6C; }\n.status-3 { background-color: #E6A23C; }\n.status-4 { background-color: #409EFF; }\n\n.apply-details {\n  border-top: 1rpx solid #f0f0f0;\n  padding-top: 16rpx;\n}\n\n.detail-item {\n  display: flex;\n  margin-bottom: 8rpx;\n  font-size: 26rpx;\n}\n\n.detail-item:last-child {\n  margin-bottom: 0;\n}\n\n.label {\n  color: #666;\n  min-width: 140rpx;\n}\n\n.value {\n  color: #333;\n  flex: 1;\n}\n\n.loading-more,\n.empty-data {\n  text-align: center;\n  padding: 30rpx;\n  color: #999;\n  font-size: 28rpx;\n}\n</style>","import MiniProgramPage from 'D:/CODE/capstone-project/club-master/club/club_uniapp/pages/user/myApplies.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","ref","uni","onMounted"],"mappings":";;;;;;;;;;;;;;;;AAgEA,UAAM,EAAE,MAAO,IAAGA,iCAAoB;AAEtC,UAAM,YAAYC,cAAG,IAAC,EAAE;AACxB,UAAM,YAAYA,cAAG,IAAC,KAAK;AAC3B,UAAM,aAAaA,cAAG,IAAC,KAAK;AAE5B,UAAM,cAAc,YAAY;AAC9B,UAAI,UAAU;AAAO;AACrB,gBAAU,QAAQ;AAClB,UAAI;AAEF,cAAM,MAAM,MAAM,MAAM,KAAK,KAAK,iBAAgB;AAClDC,sBAAY,MAAA,MAAA,OAAA,kCAAA,SAAS,GAAG;AACxB,YAAI,IAAI,SAAS,KAAK;AACpB,oBAAU,QAAQ,IAAI,QAAQ,CAAA;AAC9BA,6EAAY,SAAS,UAAU,KAAK;AAAA,QAC1C,OAAW;AACLA,wBAAA,MAAA,MAAA,SAAA,kCAAc,aAAa,IAAI,OAAO;AACtC,oBAAU,QAAQ;AAClBA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,IAAI,WAAW;AAAA,YACtB,MAAM;AAAA,UACd,CAAO;AAAA,QACF;AAAA,MACF,SAAQ,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,kCAAc,YAAY,KAAK;AAC/B,kBAAU,QAAQ;AAClBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AAAA,MACL,UAAY;AACR,kBAAU,QAAQ;AAClB,mBAAW,QAAQ;AAAA,MACpB;AAAA,IACH;AAEA,UAAM,iBAAiB,MAAM;AAC3B,iBAAW,QAAQ;AACnB,kBAAa;AAAA,IACf;AAEA,UAAM,WAAW,MAAM;AAAA,IAEvB;AAEA,UAAM,gBAAgB,CAAC,WAAW;AAChC,cAAQ,QAAM;AAAA,QACZ,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf;AAAS,iBAAO;AAAA,MACjB;AAAA,IACH;AAEA,UAAM,SAAS,MAAM;AACnBA,oBAAAA,MAAI,aAAc;AAAA,IACpB;AAEA,UAAM,aAAa,CAAC,OAAO;AACzBA,oBAAG,MAAC,WAAW,EAAE,KAAK,yBAAyB,EAAE,IAAI;AAAA,IACvD;AAEAC,kBAAAA,UAAU,MAAM;AACd,kBAAa;AAAA,IACf,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClID,GAAG,WAAW,eAAe;"}