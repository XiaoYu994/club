{"version":3,"file":"activity.js","sources":["pages/activity/activity.vue","../../../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWN0aXZpdHkvYWN0aXZpdHkudnVl"],"sourcesContent":["<template>\n  <view class=\"activity-container pageBg\">\n    <!-- 顶部导航 -->\n\t<!-- #ifndef MP-TOUTIAO -->\n\t<custom-nav-bar title=\"社团活动\t\"></custom-nav-bar>\n\t<!-- #endif -->\n    \n    <!-- 搜索栏 -->\n    <view class=\"search-bar\">\n      <view class=\"search-input\">\n        <uni-icons type=\"search\" size=\"16\" color=\"#999\"></uni-icons>\n        <input \n          type=\"text\" \n          v-model=\"searchKeyword\" \n          placeholder=\"搜索活动\" \n          confirm-type=\"search\"\n          @confirm=\"searchActivities\"\n        />\n      </view>\n      <view class=\"filter-btn\" @tap=\"showFilterDrawer\">\n        <uni-icons type=\"paperplane\" size=\"18\" color=\"#b13b7a\"></uni-icons>\n      </view>\n    </view>\n    \n    <!-- 标签筛选 -->\n    <scroll-view class=\"filter-tags\" scroll-x>\n      <view \n        v-for=\"(tag, idx) in filterTags\" \n        :key=\"idx\" \n        :class=\"['tag-item', currentTag === idx ? 'active' : '']\"\n        @tap=\"switchTag(idx)\"\n      >\n        {{ tag.name }}\n      </view>\n    </scroll-view>\n    \n    <!-- 活动列表 -->\n    <scroll-view \n      scroll-y \n      class=\"activity-list\"\n      refresher-enabled\n      :refresher-triggered=\"refreshing\"\n      @refresherrefresh=\"refreshActivities\"\n      @scrolltolower=\"loadMore\"\n      :show-scrollbar=\"false\"\n      enhanced\n    >\n      <view class=\"list-container\">\n        <!-- 活动卡片 -->\n        <view\n          v-for=\"(item, idx) in filteredActivityList\"\n          :key=\"idx\"\n          class=\"activity-card\"\n          @tap=\"goToDetail(item)\"\n        >\n          <image class=\"activity-poster\" :src=\"getPosterUrl(item.poster)\" mode=\"aspectFill\"></image>\n          <view class=\"activity-info\">\n            <view class=\"activity-title\">{{ item.title }}</view>\n            <view class=\"activity-meta\">\n              <view class=\"meta-item\">\n                <uni-icons type=\"calendar\" size=\"14\" color=\"#666\"></uni-icons>\n                <text>{{ formatDate1(item.startTime)}}</text>\n              </view>\n              <view class=\"meta-item\">\n                <uni-icons type=\"location\" size=\"14\" color=\"#666\"></uni-icons>\n                <text>{{ item.address || '待定' }}</text>\n              </view>\n            </view>\n            <view class=\"activity-stats\">\n              <view class=\"status-tag\" :class=\"getStatusClass(item)\">{{ getStatusText(item) }}</view>\n              <view class=\"join-count\">\n                <text>{{ item.joinCount || 0 }}人参与</text>\n              </view>\n            </view>\n          </view>\n        </view>\n\n        <!-- 加载状态 -->\n        <view v-if=\"isLoading\" class=\"loading-more\">\n          <uni-icons type=\"spinner-cycle\" size=\"20\" color=\"#999\"></uni-icons>\n          <text>加载中...</text>\n        </view>\n\n        <!-- 无数据提示 -->\n        <view v-if=\"filteredActivityList.length === 0 && !isLoading\" class=\"empty-data\">\n          <image src=\"/static/images/empty-activity.png\" mode=\"aspectFit\"></image>\n          <text>暂无活动信息</text>\n        </view>\n\n        <!-- 加载完毕提示 -->\n        <view v-if=\"filteredActivityList.length > 0 && !hasMore\" class=\"no-more\">\n          <text>没有更多了</text>\n        </view>\n      </view>\n    </scroll-view>\n    \n    <!-- 筛选抽屉 -->\n    <uni-popup ref=\"filterPopup\" type=\"bottom\">\n      <view class=\"filter-drawer\">\n        <view class=\"drawer-header\">\n          <text>筛选条件</text>\n          <view class=\"close-btn\" @tap=\"closeFilterDrawer\">\n            <uni-icons type=\"close\" size=\"20\" color=\"#999\"></uni-icons>\n          </view>\n        </view>\n\n        <scroll-view scroll-y class=\"filter-content\">\n        <view class=\"filter-section\">\n          <text class=\"section-title\">活动时间</text>\n          <view class=\"time-inputs\">\n            <picker mode=\"date\" :value=\"filters.startDate\" @change=\"onStartDateChange\">\n                <view class=\"time-picker\">\n                  <text :class=\"{ 'placeholder': !filters.startDate }\">{{ filters.startDate || '开始日期' }}</text>\n                  <uni-icons type=\"calendar\" size=\"16\" color=\"#999\"></uni-icons>\n                </view>\n            </picker>\n            <text class=\"to-text\">至</text>\n            <picker mode=\"date\" :value=\"filters.endDate\" @change=\"onEndDateChange\">\n                <view class=\"time-picker\">\n                  <text :class=\"{ 'placeholder': !filters.endDate }\">{{ filters.endDate || '结束日期' }}</text>\n                  <uni-icons type=\"calendar\" size=\"16\" color=\"#999\"></uni-icons>\n                </view>\n            </picker>\n          </view>\n        </view>\n        \n        <view class=\"filter-section\">\n          <text class=\"section-title\">社团类型</text>\n          <view class=\"filter-options\">\n            <view \n              v-for=\"(type, idx) in clubTypeOptions\" \n              :key=\"idx\"\n              :class=\"['filter-option', filters.clubType === type.value ? 'active' : '']\"\n              @tap=\"selectClubType(type.value)\"\n            >\n              {{ type.name }}\n            </view>\n          </view>\n        </view>\n        </scroll-view>\n        \n        <view class=\"drawer-footer\">\n          <button class=\"reset-btn\" @tap=\"resetFilters\">重置</button>\n          <button class=\"confirm-btn\" @tap=\"applyFilters\">确认</button>\n        </view>\n      </view>\n    </uni-popup>\n  </view>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, getCurrentInstance, onBeforeUnmount } from 'vue'\nimport {formatDate, getImageUrl} from '@/utils/common.js'\nimport { listenActivityDataChanged } from '@/utils/activity.js'\n\nconst { proxy } = getCurrentInstance()\n// 状态栏高度\nconst statusBarHeight = ref(0)\n\n// 用户角色\nconst isAdmin = ref(true) // 根据实际登录用户身份设置\n\n// 搜索关键字\nconst searchKeyword = ref('')\n\n// 当前选中的标签\nconst currentTag = ref(0)\n\n// 筛选标签\nconst filterTags = ref([\n  { name: '全部活动', type: 'all' },\n  { name: '正在报名', type: 'enrolling' },\n  { name: '进行中', type: 'ongoing' },\n  { name: '已结束', type: 'ended' }\n])\n\n// 社团类型选项\nconst clubTypeOptions = [\n  { name: '全部', value: -1 },\n  { name: '普通社团', value: 0 },\n  { name: '院级社团', value: 1 },\n  { name: '校级社团', value: 2 }\n]\n\n// 筛选条件\nconst filters = reactive({\n  startDate: '',\n  endDate: '',\n  clubType: -1\n})\n\n// 列表数据\nconst activityList = ref([])  // 从后端获取的完整活动列表\nconst filteredActivityList = ref([])  // 前端筛选后显示的列表\nconst page = ref(1)\nconst pageSize = ref(10)\nconst hasMore = ref(true)\nconst isLoading = ref(false)\nconst refreshing = ref(false)\n\n// 弹窗引用\nconst filterPopup = ref(null)\n\n// 记录上次离开页面的时间\nlet lastHideTime = 0\n// 用于清理事件监听的函数\nlet unlistenActivityDataChanged = null\n\n// 获取海报URL（不添加时间戳，保留缓存机制）\nconst getPosterUrl = (url) => {\n  return getImageUrl(url, '/static/images/default-poster.png', false); // 传入false表示不添加时间戳\n}\n\n// 格式化日期\nconst formatDate1 = (timestamp) => {\n  if (!timestamp) return '未设置'\n  timestamp = Number(timestamp)\n  const date = new Date(timestamp)\n  // 这个是utils中的方法\n  return formatDate(date)\n}\n\n// 获取活动实际状态\n// 注意：前端直接使用后端返回的status字段，不再根据时间计算\n// status = 0: 已取消\n// status = 1: 计划中（等待审批，不显示在列表中）\n// status = 2: 进行中（已审批通过，可以报名）\n// status = 3: 已结束\nconst getActualStatus = (activity) => {\n  if (!activity) return -1;\n\n  const now = Date.now();\n  const startTime = Number(activity.startTime || 0);\n  const endTime = Number(activity.endTime || 0);\n\n  // 如果是已结束状态，直接返回\n  if (activity.status === 3) {\n    return 3; // 已结束\n  }\n\n  // 如果是已取消状态，直接返回\n  if (activity.status === 0) {\n    return 0; // 已取消\n  }\n\n  // 如果是进行中状态（status=2），根据时间判断是报名中还是活动进行中\n  if (activity.status === 2) {\n    if (now < startTime) {\n      return 1; // 报名中（未到活动开始时间）\n    } else if (now >= startTime && now < endTime) {\n      return 2; // 活动进行中\n    } else {\n      return 3; // 已结束（理论上不会走到这里，因为定时任务会更新status=3）\n    }\n  }\n\n  // 如果是计划中状态（status=1），返回-1（不应该显示在列表中）\n  return -1;\n}\n\n// 获取状态文本\nconst getStatusText = (activity) => {\n  const actualStatus = getActualStatus(activity);\n  switch (actualStatus) {\n    case 0: return '已取消';\n    case 1: return '报名中';\n    case 2: return '进行中';\n    case 3: return '已结束';\n    default: return '未知';\n  }\n}\n\n// 获取状态类名\nconst getStatusClass = (activity) => {\n  const actualStatus = getActualStatus(activity);\n  switch (actualStatus) {\n    case 0: return 'cancelled';\n    case 1: return 'enrolling';\n    case 2: return 'ongoing';\n    case 3: return 'ended';\n    default: return '';\n  }\n}\n\n// 本地筛选活动列表\nconst filterActivitiesLocally = () => {\n  const now = Date.now();\n\n  if (currentTag.value === 0) {\n    // 全部活动：显示所有\n    filteredActivityList.value = activityList.value;\n  } else if (currentTag.value === 1) {\n    // 正在报名：status=2 且 当前时间 < 开始时间\n    filteredActivityList.value = activityList.value.filter(activity => {\n      return activity.status === 2 && now < Number(activity.startTime);\n    });\n  } else if (currentTag.value === 2) {\n    // 进行中：status=2 且 开始时间 <= 当前时间 < 结束时间\n    filteredActivityList.value = activityList.value.filter(activity => {\n      const startTime = Number(activity.startTime);\n      const endTime = Number(activity.endTime);\n      return activity.status === 2 && now >= startTime && now < endTime;\n    });\n  } else if (currentTag.value === 3) {\n    // 已结束：status=3\n    filteredActivityList.value = activityList.value.filter(activity => {\n      return activity.status === 3;\n    });\n  }\n}\n\n// 切换标签\nconst switchTag = (index) => {\n  currentTag.value = index;\n  // 只进行本地筛选，不重新加载数据\n  filterActivitiesLocally();\n}\n\n// 加载活动列表\nconst loadActivities = async () => {\n  if (isLoading.value) return\n\n  isLoading.value = true\n\n  try {\n    // 构建查询参数\n    const params = {\n      pageNo: page.value,\n      pageSize: pageSize.value,\n      keyword: searchKeyword.value\n    }\n\n    // 不再根据标签添加status参数，后端会返回所有status=2和3的活动\n    // 前端根据标签在本地筛选\n\n    // 添加筛选条件\n    if (filters.startDate) {\n      params.startTime = new Date(filters.startDate).getTime()\n    }\n\n    if (filters.endDate) {\n      params.endTime = new Date(filters.endDate).getTime()\n    }\n\n    if (filters.clubType !== -1) {\n      params.clubType = filters.clubType\n    }\n\n    // 调用API获取数据\n    const res = await proxy.$api.activity.getActivityList(params)\n\n    if (res.code === 200) {\n      const activities = res.data.list || []\n\n      // 确保每个活动的海报URL都添加时间戳防止缓存\n      activities.forEach(activity => {\n        if (activity.poster) {\n          activity.poster = getImageUrl(activity.poster)\n        }\n      })\n\n      if (page.value === 1) {\n        activityList.value = activities\n      } else {\n        activityList.value = [...activityList.value, ...activities]\n      }\n\n      // 进行本地筛选\n      filterActivitiesLocally()\n\n      hasMore.value = activities.length === pageSize.value\n      page.value++\n    } else {\n      uni.showToast({\n        title: res.msg || '加载失败',\n        icon: 'none'\n      })\n    }\n  } catch (error) {\n    console.error('加载活动列表失败', error)\n    uni.showToast({\n      title: '网络异常，请稍后重试',\n      icon: 'none'\n    })\n  } finally {\n    isLoading.value = false\n    refreshing.value = false\n  }\n}\n\n// 刷新活动列表\nconst refreshActivities = () => {\n  refreshing.value = true\n  page.value = 1\n  hasMore.value = true\n  \n  // 重置搜索关键字\n  searchKeyword.value = ''\n  \n  // 重置当前选中的标签\n  currentTag.value = 0\n  \n  // 重置筛选条件\n  resetFilters()\n  \n  // 重新加载数据\n  loadActivities()\n}\n\n// 加载更多\nconst loadMore = () => {\n  if (hasMore.value && !isLoading.value) {\n    loadActivities()\n  }\n}\n\n// 搜索活动\nconst searchActivities = () => {\n  page.value = 1\n  loadActivities()\n}\n\n// 显示筛选抽屉\nconst showFilterDrawer = () => {\n  filterPopup.value.open()\n}\n\n// 关闭筛选抽屉\nconst closeFilterDrawer = () => {\n  filterPopup.value.close()\n}\n\n// 选择社团类型\nconst selectClubType = (type) => {\n  filters.clubType = type\n}\n\n// 开始日期变更\nconst onStartDateChange = (e) => {\n  filters.startDate = e.detail.value\n}\n\n// 结束日期变更\nconst onEndDateChange = (e) => {\n  filters.endDate = e.detail.value\n}\n\n// 重置筛选条件\nconst resetFilters = () => {\n  filters.startDate = ''\n  filters.endDate = ''\n  filters.clubType = -1\n}\n\n// 应用筛选条件\nconst applyFilters = () => {\n  page.value = 1\n  closeFilterDrawer()\n  loadActivities()\n}\n\n// 发布活动\nconst publishActivity = () => {\n  uni.navigateTo({\n    url: '/pages/activity/publish'\n  })\n}\n\n// 跳转到活动详情\nconst goToDetail = (item) => {\n  try {\n    // 确保时间戳是数字类型\n    const processedItem = {\n      ...item,\n      startTime: Number(item.startTime),\n      endTime: Number(item.endTime)\n    };\n    \n    // 将活动数据转为 JSON 字符串传递\n    const itemData = encodeURIComponent(JSON.stringify(processedItem));\n    \n    // 通过url携带数据\n    uni.navigateTo({\n      url: `/pages/activity/activityDeatil?id=${item.id}&itemData=${itemData}`\n    });\n  } catch (error) {\n    console.error('跳转详情页出错', error);\n    // 如果数据处理出错，只传递ID\n  uni.navigateTo({\n    url: `/pages/activity/activityDeatil?id=${item.id}`\n    });\n}\n}\n\n// 初始化\nonMounted(() => {\n  // 获取状态栏高度\n  const systemInfo = uni.getSystemInfoSync()\n  statusBarHeight.value = systemInfo.statusBarHeight || 20\n  \n  // 加载活动列表\n  loadActivities()\n  \n  // 监听活动数据变化事件\n  unlistenActivityDataChanged = listenActivityDataChanged(() => {\n    console.log('接收到活动数据变化事件，刷新列表')\n    // 重置页码并重新加载数据\n    page.value = 1\n    loadActivities()\n  })\n})\n\n// 组件卸载前清理事件监听\nonBeforeUnmount(() => {\n  // 移除活动数据变化事件监听\n  if (unlistenActivityDataChanged) {\n    unlistenActivityDataChanged()\n  }\n})\n\n// 在uni-app中，使用defineExpose来处理页面生命周期\ndefineExpose({\n  onShow() {\n    // 从其他页面返回时，直接重新加载数据\n    const now = Date.now()\n    // 无论时间间隔多长，都刷新数据，确保从编辑页面返回时能看到最新数据\n    console.log('页面显示，刷新活动列表')\n    // 重置页码并重新加载数据\n    page.value = 1\n    loadActivities()\n    // 记录当前时间\n    lastHideTime = now\n  },\n  onHide() {\n    lastHideTime = Date.now()\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.activity-container {\n  .status-bar {\n    width: 100%;\n    background: #fff;\n  }\n  \n  .nav-header {\n    background: #fff;\n    padding: 0 30rpx;\n    height: 90rpx;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    border-bottom: 1rpx solid #eee;\n    \n    .nav-title {\n      font-size: 36rpx;\n      font-weight: bold;\n      color: #222;\n    }\n    \n    .nav-btn {\n      width: 64rpx;\n      height: 64rpx;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      background: #f0f7ff;\n    }\n  }\n  \n  .search-bar {\n    padding: 30rpx;\n    display: flex;\n    align-items: center;\n    margin-top: -10rpx;\n    \n    .search-input {\n      flex: 1;\n      height: 72rpx;\n      background: rgba(255, 255, 255, 0.8);\n      border-radius: 36rpx;\n      display: flex;\n      align-items: center;\n      padding: 0 30rpx;\n      box-shadow: 0 2rpx 12rpx rgba(0,0,0,0.06);\n      \n      input {\n        flex: 1;\n        height: 72rpx;\n        font-size: 28rpx;\n        margin-left: 20rpx;\n      }\n    }\n    \n    .filter-btn {\n      width: 72rpx;\n      height: 72rpx;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      margin-left: 20rpx;\n      background: rgba(255, 255, 255, 0.8);\n      border-radius: 50%;\n      box-shadow: 0 2rpx 12rpx rgba(0,0,0,0.06);\n    }\n  }\n  \n  .filter-tags {\n    height: 80rpx;\n    white-space: nowrap;\n    padding: 0 20rpx;\n    margin: 0 10rpx;\n    \n    .tag-item {\n      display: inline-block;\n      padding: 12rpx 30rpx;\n      font-size: 28rpx;\n      color: #666;\n      margin-right: 20rpx;\n      border-radius: 30rpx;\n      background: rgba(255, 255, 255, 0.8);\n      box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);\n      \n      &.active {\n        color: #fff;\n        background: #b13b7a;\n        box-shadow: 0 2rpx 10rpx rgba(177, 59, 122, 0.3);\n      }\n    }\n  }\n  \n  .activity-list {\n    height: calc(100vh - 310rpx);\n    padding: 20rpx 30rpx;\n    box-sizing: border-box;\n    \n    /* 隐藏滚动条 - 样式方式 */\n    &::-webkit-scrollbar {\n      width: 0;\n      background: transparent;\n      display: none;\n    }\n    \n    /* 兼容Firefox浏览器 */\n    scrollbar-width: none;\n    /* 兼容IE和Edge浏览器 */\n    -ms-overflow-style: none;\n    \n    .list-container {\n      padding-bottom: 40rpx;\n    }\n    \n    .activity-card {\n      margin-bottom: 30rpx;\n      background: #fff;\n      border-radius: 18rpx;\n      overflow: hidden;\n      box-shadow: 0 2rpx 12rpx rgba(0,0,0,0.08);\n      /* 添加过渡效果，使交互更流畅 */\n      transition: transform 0.2s, box-shadow 0.2s;\n      width: 100%;\n      box-sizing: border-box;\n      \n      /* 点击缩放效果 */\n      &:active {\n        transform: scale(0.98);\n        box-shadow: 0 1rpx 5rpx rgba(0,0,0,0.05);\n      }\n      \n      .activity-poster {\n        width: 100%;\n        height: 300rpx;\n        transition: opacity 0.3s;\n      }\n      \n      .activity-info {\n        padding: 24rpx;\n        \n        .activity-title {\n          font-size: 32rpx;\n          font-weight: 600;\n          color: #333;\n          margin-bottom: 16rpx;\n        }\n        \n        .activity-meta {\n          display: flex;\n          margin-bottom: 20rpx;\n          \n          .meta-item {\n            display: flex;\n            align-items: center;\n            font-size: 24rpx;\n            color: #666;\n            margin-right: 30rpx;\n            \n            text {\n              margin-left: 8rpx;\n            }\n          }\n        }\n        \n        .activity-stats {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          \n          .status-tag {\n            padding: 6rpx 18rpx;\n            border-radius: 20rpx;\n            font-size: 22rpx;\n            font-weight: 500;\n\n            &.enrolling {\n              color: #52c41a;\n              background: rgba(82, 196, 26, 0.1);\n            }\n\n            &.planned {\n              color: #b13b7a;\n              background: rgba(177, 59, 122, 0.1);\n            }\n\n            &.ongoing {\n              color: #2979ff;\n              background: rgba(41, 121, 255, 0.1);\n            }\n\n            &.ended {\n              color: #999;\n              background: #f5f5f5;\n            }\n\n            &.cancelled {\n              color: #f44336;\n              background: rgba(244, 67, 54, 0.1);\n            }\n          }\n          \n          .join-count {\n            font-size: 24rpx;\n            color: #999;\n          }\n        }\n      }\n    }\n    \n    .loading-more {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 30rpx 0;\n      \n      text {\n        font-size: 24rpx;\n        color: #999;\n        margin-left: 10rpx;\n      }\n    }\n    \n    .empty-data {\n      padding: 100rpx 0;\n      text-align: center;\n      \n      image {\n        width: 200rpx;\n        height: 200rpx;\n        margin-bottom: 20rpx;\n        opacity: 0.8;\n      }\n      \n      text {\n        font-size: 28rpx;\n        color: #999;\n      }\n    }\n    \n    .no-more {\n      text-align: center;\n      padding: 30rpx 0;\n      \n      text {\n        font-size: 24rpx;\n        color: #999;\n      }\n    }\n  }\n  \n  .filter-drawer {\n    width: 100%;\n    background: #fff;\n    border-radius: 24rpx 24rpx 0 0;\n    padding: 30rpx 30rpx 0;\n    box-sizing: border-box;\n    max-height: 80vh;\n    display: flex;\n    flex-direction: column;\n    \n    .drawer-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding-bottom: 30rpx;\n      border-bottom: 1rpx solid #eee;\n      \n      text {\n        font-size: 32rpx;\n        font-weight: 600;\n        color: #333;\n      }\n      \n      .close-btn {\n        padding: 10rpx;\n      }\n    }\n    \n    .filter-content {\n      flex: 1;\n      overflow-y: auto;\n      max-height: 60vh;\n    }\n    \n    .filter-section {\n      margin: 30rpx 0;\n      \n      .section-title {\n        font-size: 28rpx;\n        color: #666;\n        margin-bottom: 20rpx;\n        font-weight: 500;\n      }\n      \n      .filter-options {\n        display: flex;\n        flex-wrap: wrap;\n        \n        .filter-option {\n          padding: 12rpx 24rpx;\n          border: 1rpx solid #eee;\n          border-radius: 30rpx;\n          font-size: 26rpx;\n          color: #666;\n          margin-right: 20rpx;\n          margin-bottom: 20rpx;\n          \n          &.active {\n            background: #b13b7a;\n            color: #fff;\n            border-color: #b13b7a;\n          }\n        }\n      }\n      \n      .time-inputs {\n        display: flex;\n        align-items: center;\n        \n        .time-picker {\n          flex: 1;\n          padding: 16rpx 20rpx;\n          background: #f9f9f9;\n          border-radius: 12rpx;\n          font-size: 26rpx;\n          color: #333;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          \n          .placeholder {\n            color: #999;\n          }\n        }\n        \n        .to-text {\n          margin: 0 20rpx;\n          color: #999;\n          font-size: 26rpx;\n        }\n      }\n    }\n    \n    .drawer-footer {\n      padding: 20rpx 0 40rpx;\n      display: flex;\n      border-top: 1rpx solid #f5f5f5;\n      \n      button {\n        flex: 1;\n        height: 80rpx;\n        line-height: 80rpx;\n        text-align: center;\n        border-radius: 40rpx;\n        margin: 0 10rpx;\n        font-size: 28rpx;\n      }\n      \n      .reset-btn {\n        background: #f5f5f5;\n        color: #666;\n      }\n      \n      .confirm-btn {\n        background: #b13b7a;\n        color: #fff;\n      }\n    }\n  }\n}\n</style>","import MiniProgramPage from 'D:/CODE/capstone-project/club-master/club/club_uniapp/pages/activity/activity.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","ref","reactive","getImageUrl","formatDate","uni","onMounted","listenActivityDataChanged","onBeforeUnmount"],"mappings":"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"}