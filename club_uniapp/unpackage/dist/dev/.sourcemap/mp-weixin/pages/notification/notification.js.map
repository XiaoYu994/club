{"version":3,"file":"notification.js","sources":["pages/notification/notification.vue","../../../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbm90aWZpY2F0aW9uL25vdGlmaWNhdGlvbi52dWU"],"sourcesContent":["<template>\n  <view class=\"notification-container pageBg\">\n    <!-- 顶部导航栏 -->\n    <custom-nav-bar title=\"消息通知\" background=\"#fff\" title-color=\"#333\">\n      <template #right>\n        <view class=\"nav-actions\">\n          <text v-if=\"unreadCount > 0\" class=\"read-all-btn\" @tap=\"handleMarkAllRead\">全部已读</text>\n        </view>\n      </template>\n    </custom-nav-bar>\n\n    <!-- 消息通知列表 -->\n    <scroll-view\n      scroll-y\n      class=\"scroll-panel\"\n      @scrolltolower=\"loadMore\"\n      lower-threshold=\"100\"\n    >\n      <view class=\"notification-list\">\n        <view\n          v-for=\"(notification, idx) in notifications\"\n          :key=\"notification.id\"\n          class=\"notification-item\"\n          :class=\"{ 'unread': notification.isRead === 0 }\"\n          @tap=\"handleNotificationClick(notification)\"\n        >\n          <!-- 未读标记 -->\n          <view v-if=\"notification.isRead === 0\" class=\"unread-dot\"></view>\n\n          <!-- 通知图标 -->\n          <view class=\"notification-icon\" :class=\"getTypeClass(notification.type)\">\n            <uni-icons :type=\"getTypeIcon(notification.type)\" size=\"24\" color=\"#fff\"></uni-icons>\n          </view>\n\n          <!-- 通知内容 -->\n          <view class=\"notification-content\">\n            <view class=\"notification-title\">{{ notification.title }}</view>\n            <view class=\"notification-message\">{{ notification.message }}</view>\n            <view class=\"notification-time\">{{ formatTime(notification.createTime) }}</view>\n          </view>\n\n          <!-- 删除按钮 -->\n          <view class=\"notification-actions\" @tap.stop=\"handleDelete(notification)\">\n            <uni-icons type=\"trash\" size=\"18\" color=\"#999\"></uni-icons>\n          </view>\n        </view>\n\n        <!-- 加载状态 -->\n        <view v-if=\"loading\" class=\"loading-more\">\n          <uni-icons type=\"spinner-cycle\" size=\"20\" color=\"#999\"></uni-icons>\n          <text>加载中...</text>\n        </view>\n\n        <!-- 没有更多 -->\n        <view v-if=\"noMore && notifications.length > 0\" class=\"no-more\">\n          <text>没有更多消息了</text>\n        </view>\n\n        <!-- 空状态 -->\n        <view v-if=\"notifications.length === 0 && !loading\" class=\"empty-data\">\n          <image class=\"empty-image\" src=\"/static/img/empty-notification.png\" mode=\"aspectFit\"></image>\n          <text class=\"empty-text\">暂无消息通知</text>\n          <text class=\"empty-tip\">您的活动通知将在这里显示</text>\n        </view>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, getCurrentInstance } from 'vue';\nimport { onShow } from '@dcloudio/uni-app';\n\nconst { proxy } = getCurrentInstance();\n\n// 消息通知数据\nconst notifications = ref([]);\nconst loading = ref(false);\nconst unreadCount = ref(0);\nconst page = ref(1);\nconst pageSize = ref(20);\nconst noMore = ref(false);\n\n// 加载消息通知列表\nasync function loadNotifications(refresh = false) {\n  if (loading.value) return;\n\n  if (refresh) {\n    page.value = 1;\n    noMore.value = false;\n    notifications.value = [];\n  }\n\n  loading.value = true;\n  console.log('【通知】开始加载消息通知，page:', page.value, 'size:', pageSize.value);\n\n  try {\n    const response = await proxy.$api.notification.getNotifications({\n      page: page.value,\n      size: pageSize.value\n    });\n\n    console.log('【通知】接口返回:', response);\n\n    if (response.code === 200) {\n      const newData = response.data.list || [];\n      console.log('【通知】获取到数据条数:', newData.length, '数据:', newData);\n\n      if (refresh) {\n        notifications.value = newData;\n      } else {\n        notifications.value = [...notifications.value, ...newData];\n      }\n\n      // 判断是否还有更多数据\n      if (newData.length < pageSize.value) {\n        noMore.value = true;\n      }\n\n      // 更新页码\n      if (newData.length > 0) {\n        page.value++;\n      }\n    } else {\n      console.error('【通知】接口返回错误:', response.message);\n      uni.showToast({ title: response.message || '获取消息失败', icon: 'none' });\n    }\n  } catch (error) {\n    console.error('【通知】获取消息通知失败:', error);\n    uni.showToast({ title: '网络异常，请稍后重试', icon: 'none' });\n  } finally {\n    loading.value = false;\n  }\n}\n\n// 加载未读数量\nasync function loadUnreadCount() {\n  try {\n    const response = await proxy.$api.notification.getUnreadCount();\n    if (response.code === 200) {\n      unreadCount.value = response.data || 0;\n    }\n  } catch (error) {\n    console.error('获取未读数量失败:', error);\n  }\n}\n\n// 加载更多\nfunction loadMore() {\n  if (!noMore.value && !loading.value) {\n    loadNotifications(false);\n  }\n}\n\n// 点击通知\nasync function handleNotificationClick(notification) {\n  // 标记为已读\n  if (notification.isRead === 0) {\n    try {\n      await proxy.$api.notification.markAsRead(notification.id);\n      notification.isRead = 1;\n      unreadCount.value = Math.max(0, unreadCount.value - 1);\n    } catch (error) {\n      console.error('标记已读失败:', error);\n    }\n  }\n\n  // 根据通知类型跳转到相应页面\n  if (notification.type === 'activity_cancel' && notification.relatedId) {\n    uni.navigateTo({\n      url: `/pages/activity/activityDeatil?id=${notification.relatedId}`\n    });\n  } else if (notification.type === 'check_in' && notification.relatedId) {\n    uni.navigateTo({\n      url: `/pages/activity/activityDeatil?id=${notification.relatedId}`\n    });\n  }\n}\n\n// 全部标记为已读\nfunction handleMarkAllRead() {\n  uni.showModal({\n    title: '确认操作',\n    content: '确定要将所有消息标记为已读吗？',\n    success: async (res) => {\n      if (res.confirm) {\n        try {\n          uni.showLoading({ title: '处理中...' });\n          const response = await proxy.$api.notification.markAllAsRead();\n\n          if (response.code === 200) {\n            // 更新本地数据\n            notifications.value.forEach(item => {\n              item.isRead = 1;\n            });\n            unreadCount.value = 0;\n\n            uni.showToast({ title: '已全部标记为已读', icon: 'success' });\n          } else {\n            uni.showToast({ title: response.message || '操作失败', icon: 'none' });\n          }\n        } catch (error) {\n          console.error('标记全部已读失败:', error);\n          uni.showToast({ title: '网络异常，请稍后重试', icon: 'none' });\n        } finally {\n          uni.hideLoading();\n        }\n      }\n    }\n  });\n}\n\n// 删除消息\nfunction handleDelete(notification) {\n  uni.showModal({\n    title: '确认删除',\n    content: '确定要删除这条消息吗？',\n    success: async (res) => {\n      if (res.confirm) {\n        try {\n          const response = await proxy.$api.notification.deleteNotification(notification.id);\n\n          if (response.code === 200) {\n            // 从列表中移除\n            const index = notifications.value.findIndex(item => item.id === notification.id);\n            if (index !== -1) {\n              notifications.value.splice(index, 1);\n            }\n\n            // 更新未读数量\n            if (notification.isRead === 0) {\n              unreadCount.value = Math.max(0, unreadCount.value - 1);\n            }\n\n            uni.showToast({ title: '删除成功', icon: 'success' });\n          } else {\n            uni.showToast({ title: response.message || '删除失败', icon: 'none' });\n          }\n        } catch (error) {\n          console.error('删除消息失败:', error);\n          uni.showToast({ title: '网络异常，请稍后重试', icon: 'none' });\n        }\n      }\n    }\n  });\n}\n\n// 获取通知类型对应的图标\nfunction getTypeIcon(type) {\n  const iconMap = {\n    'activity_cancel': 'closeempty',\n    'check_in': 'checkmarkempty',\n    'apply_review': 'chatboxes'\n  };\n  return iconMap[type] || 'notification';\n}\n\n// 获取通知类型对应的样式类\nfunction getTypeClass(type) {\n  const classMap = {\n    'activity_cancel': 'type-cancel',\n    'check_in': 'type-success',\n    'apply_review': 'type-info'\n  };\n  return classMap[type] || 'type-default';\n}\n\n// 时间格式化\nfunction formatTime(timestamp) {\n  if (!timestamp) return \"\";\n\n  // 确保timestamp是数字类型\n  const time = typeof timestamp === 'string' ? Number(timestamp) : timestamp;\n\n  if (isNaN(time)) {\n    console.error('【通知】时间格式错误:', timestamp);\n    return \"\";\n  }\n\n  const date = new Date(time);\n  const now = new Date();\n\n  // 今天\n  if (date.toDateString() === now.toDateString()) {\n    const hours = date.getHours().toString().padStart(2, '0');\n    const minutes = date.getMinutes().toString().padStart(2, '0');\n    return `今天 ${hours}:${minutes}`;\n  }\n\n  // 昨天\n  const yesterday = new Date(now);\n  yesterday.setDate(yesterday.getDate() - 1);\n  if (date.toDateString() === yesterday.toDateString()) {\n    const hours = date.getHours().toString().padStart(2, '0');\n    const minutes = date.getMinutes().toString().padStart(2, '0');\n    return `昨天 ${hours}:${minutes}`;\n  }\n\n  // 本周\n  const oneWeekAgo = new Date(now);\n  oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);\n  if (date > oneWeekAgo) {\n    const days = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\n    const hours = date.getHours().toString().padStart(2, '0');\n    const minutes = date.getMinutes().toString().padStart(2, '0');\n    return `${days[date.getDay()]} ${hours}:${minutes}`;\n  }\n\n  // 更早\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\n  const day = date.getDate().toString().padStart(2, '0');\n  const hours = date.getHours().toString().padStart(2, '0');\n  const minutes = date.getMinutes().toString().padStart(2, '0');\n  return `${month}-${day} ${hours}:${minutes}`;\n}\n\nonMounted(() => {\n  loadNotifications(true);\n  loadUnreadCount();\n});\n\nonShow(() => {\n  loadNotifications(true);\n  loadUnreadCount();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.notification-container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n\n  .nav-actions {\n    display: flex;\n    align-items: center;\n    padding-right: 30rpx;\n\n    .read-all-btn {\n      font-size: 28rpx;\n      color: #2979ff;\n      padding: 10rpx 20rpx;\n    }\n  }\n\n  .scroll-panel {\n    flex: 1;\n    padding: 20rpx 0;\n  }\n}\n\n.notification-list {\n  padding: 0 30rpx;\n}\n\n.notification-item {\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 25rpx 20rpx;\n  background: #fff;\n  border-radius: 20rpx;\n  margin-bottom: 20rpx;\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.03);\n  transition: all 0.3s ease;\n\n  &.unread {\n    background: linear-gradient(to right, #f0f7ff 0%, #fff 100%);\n    border-left: 4rpx solid #2979ff;\n  }\n\n  &:active {\n    transform: scale(0.98);\n    background-color: #f9f9f9;\n  }\n\n  .unread-dot {\n    position: absolute;\n    top: 30rpx;\n    left: 10rpx;\n    width: 12rpx;\n    height: 12rpx;\n    background-color: #ff3b30;\n    border-radius: 50%;\n  }\n}\n\n.notification-icon {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 16rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n\n  &.type-cancel {\n    background: linear-gradient(135deg, #ff6b6b, #ff8787);\n  }\n\n  &.type-success {\n    background: linear-gradient(135deg, #51cf66, #69db7c);\n  }\n\n  &.type-info {\n    background: linear-gradient(135deg, #2979ff, #4dabf7);\n  }\n\n  &.type-default {\n    background: linear-gradient(135deg, #868e96, #adb5bd);\n  }\n}\n\n.notification-content {\n  flex: 1;\n  margin-left: 25rpx;\n  overflow: hidden;\n}\n\n.notification-title {\n  font-size: 30rpx;\n  color: #333;\n  font-weight: 600;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-bottom: 8rpx;\n}\n\n.notification-message {\n  font-size: 26rpx;\n  color: #666;\n  line-height: 1.6;\n  margin-bottom: 12rpx;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.notification-time {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.notification-actions {\n  padding: 15rpx;\n  margin-left: 10rpx;\n}\n\n.loading-more {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 40rpx 0;\n  color: #999;\n  font-size: 26rpx;\n\n  text {\n    margin-left: 15rpx;\n  }\n}\n\n.no-more {\n  padding: 40rpx 0;\n  text-align: center;\n  color: #999;\n  font-size: 26rpx;\n}\n\n.empty-data {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 120rpx 0;\n  text-align: center;\n\n  .empty-image {\n    width: 280rpx;\n    height: 280rpx;\n    opacity: 0.8;\n  }\n\n  .empty-text {\n    font-size: 32rpx;\n    color: #999;\n    margin-top: 30rpx;\n    font-weight: 500;\n  }\n\n  .empty-tip {\n    font-size: 26rpx;\n    color: #bbb;\n    margin-top: 15rpx;\n  }\n}\n</style>\n","import MiniProgramPage from 'D:/CODE/capstone-project/club-master/club/club_uniapp/pages/notification/notification.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","ref","uni","hours","minutes","onMounted","onShow"],"mappings":"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"}