{"version":3,"file":"password.js","sources":["pages/admin/password.vue","../../../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcYWRtaW5ccGFzc3dvcmQudnVl"],"sourcesContent":["<template>\r\n  <view class=\"admin-password pageBg\">\r\n    <custom-nav-bar title=\"修改密码\" />\r\n    \r\n    <view class=\"password-form\">\r\n      <view class=\"form-item\">\r\n        <text class=\"form-label\">旧密码</text>\r\n        <input class=\"form-input\" type=\"safe-password\" password v-model=\"form.oldPassword\" placeholder=\"请输入旧密码\" />\r\n      </view>\r\n      \r\n      <view class=\"form-item\">\r\n        <text class=\"form-label\">新密码</text>\r\n        <input class=\"form-input\" type=\"safe-password\" password v-model=\"form.newPassword\" placeholder=\"请输入新密码\" />\r\n      </view>\r\n      \r\n      <view class=\"form-item\">\r\n        <text class=\"form-label\">确认新密码</text>\r\n        <input class=\"form-input\" type=\"safe-password\" password v-model=\"confirmPassword\" placeholder=\"请再次输入新密码\" />\r\n      </view>\r\n      \r\n      <button class=\"submit-btn\" @tap=\"updatePassword\">保存修改</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { getCurrentInstance } from 'vue'\r\n\r\nconst { proxy } = getCurrentInstance()\r\n\r\n// 表单数据\r\nconst form = reactive({\r\n  oldPassword: '',\r\n  newPassword: ''\r\n})\r\n\r\n// 确认密码\r\nconst confirmPassword = ref('')\r\n\r\n// 更新密码\r\nasync function updatePassword() {\r\n  try {\r\n    // 表单验证\r\n    if (!form.oldPassword) {\r\n      uni.showToast({\r\n        title: '请输入旧密码',\r\n        icon: 'none'\r\n      })\r\n      return\r\n    }\r\n    \r\n    if (!form.newPassword) {\r\n      uni.showToast({\r\n        title: '请输入新密码',\r\n        icon: 'none'\r\n      })\r\n      return\r\n    }\r\n    \r\n    if (form.newPassword.length < 6) {\r\n      uni.showToast({\r\n        title: '新密码长度不能小于6位',\r\n        icon: 'none'\r\n      })\r\n      return\r\n    }\r\n    \r\n    if (form.newPassword !== confirmPassword.value) {\r\n      uni.showToast({\r\n        title: '两次输入的新密码不一致',\r\n        icon: 'none'\r\n      })\r\n      return\r\n    }\r\n    \r\n    // 调用API\r\n    const res = await proxy.$api.admin.updatePassword(form)\r\n    \r\n    if (res.code === 200) {\r\n      uni.showToast({\r\n        title: '密码修改成功',\r\n        icon: 'success'\r\n      })\r\n      \r\n      // 清空表单\r\n      form.oldPassword = ''\r\n      form.newPassword = ''\r\n      confirmPassword.value = ''\r\n      \r\n      // 延迟返回上一页\r\n      setTimeout(() => {\r\n        uni.navigateBack()\r\n      }, 1500)\r\n    } else {\r\n      uni.showToast({\r\n        title: res.message || '密码修改失败',\r\n        icon: 'none'\r\n      })\r\n    }\r\n  } catch (error) {\r\n    console.error('密码修改失败', error)\r\n    uni.showToast({\r\n      title: '密码修改失败',\r\n      icon: 'none'\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.password-page {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n  padding: 180rpx 30rpx 30rpx;\r\n}\r\n\r\n.password-form {\r\n  background-color: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 30rpx;\r\n  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\r\n  \r\n  .form-item {\r\n    margin-bottom: 30rpx;\r\n    \r\n    .form-label {\r\n      display: block;\r\n      font-size: 28rpx;\r\n      color: #333;\r\n      margin-bottom: 12rpx;\r\n    }\r\n    \r\n    .form-input {\r\n      width: 100%;\r\n      height: 80rpx;\r\n      background: #f8f8f8;\r\n      border-radius: 12rpx;\r\n      padding: 0 20rpx;\r\n      font-size: 28rpx;\r\n      box-sizing: border-box;\r\n    }\r\n  }\r\n  \r\n  .submit-btn {\r\n    width: 100%;\r\n    height: 88rpx;\r\n    line-height: 88rpx;\r\n    background: #2979ff;\r\n    color: #fff;\r\n    border-radius: 44rpx;\r\n    font-size: 30rpx;\r\n    margin-top: 40rpx;\r\n  }\r\n}\r\n</style> ","import MiniProgramPage from 'D:/CODE/capstone-project/club-master/club/club_uniapp/pages/admin/password.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","reactive","ref","uni"],"mappings":";;;;;;;;;;;;;AA6BA,UAAM,EAAE,MAAO,IAAGA,iCAAoB;AAGtC,UAAM,OAAOC,cAAAA,SAAS;AAAA,MACpB,aAAa;AAAA,MACb,aAAa;AAAA,IACf,CAAC;AAGD,UAAM,kBAAkBC,cAAG,IAAC,EAAE;AAG9B,mBAAe,iBAAiB;AAC9B,UAAI;AAEF,YAAI,CAAC,KAAK,aAAa;AACrBC,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACd,CAAO;AACD;AAAA,QACD;AAED,YAAI,CAAC,KAAK,aAAa;AACrBA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACd,CAAO;AACD;AAAA,QACD;AAED,YAAI,KAAK,YAAY,SAAS,GAAG;AAC/BA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACd,CAAO;AACD;AAAA,QACD;AAED,YAAI,KAAK,gBAAgB,gBAAgB,OAAO;AAC9CA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACd,CAAO;AACD;AAAA,QACD;AAGD,cAAM,MAAM,MAAM,MAAM,KAAK,MAAM,eAAe,IAAI;AAEtD,YAAI,IAAI,SAAS,KAAK;AACpBA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACd,CAAO;AAGD,eAAK,cAAc;AACnB,eAAK,cAAc;AACnB,0BAAgB,QAAQ;AAGxB,qBAAW,MAAM;AACfA,0BAAAA,MAAI,aAAc;AAAA,UACnB,GAAE,IAAI;AAAA,QACb,OAAW;AACLA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,IAAI,WAAW;AAAA,YACtB,MAAM;AAAA,UACd,CAAO;AAAA,QACF;AAAA,MACF,SAAQ,OAAO;AACdA,sBAAAA,MAAA,MAAA,SAAA,mCAAc,UAAU,KAAK;AAC7BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AAAA,MACF;AAAA,IACH;;;;;;;;;;;;;;;;;;AC1GA,GAAG,WAAW,eAAe;"}