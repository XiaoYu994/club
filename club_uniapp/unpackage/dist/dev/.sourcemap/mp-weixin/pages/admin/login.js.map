{"version":3,"file":"login.js","sources":["pages/admin/login.vue","../../../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcYWRtaW5cbG9naW4udnVl"],"sourcesContent":["<template>\n  <view class=\"login-container pageBg\">\n    <view class=\"login-header\">\n      <image class=\"login-logo\" src=\"/static/images/logo.png\" mode=\"aspectFit\"></image>\n      <text class=\"login-title\">管理员登录</text>\n    </view>\n    \n    <view class=\"login-form\">\n      <view class=\"input-group\">\n        <uni-icons type=\"person\" size=\"20\" color=\"#999\"></uni-icons>\n        <input \n          type=\"text\" \n          v-model=\"username\" \n          placeholder=\"请输入管理员账号\" \n          class=\"input\"\n        />\n      </view>\n      \n      <view class=\"input-group\">\n        <uni-icons type=\"locked\" size=\"20\" color=\"#999\"></uni-icons>\n        <input \n          type=\"password\" \n          v-model=\"password\" \n          placeholder=\"请输入管理员密码\" \n          password \n          class=\"input\"\n        />\n      </view>\n      \n      <button \n        class=\"login-button\" \n        :disabled=\"!username || !password\" \n        :class=\"{'button-disabled': !username || !password}\"\n        @tap=\"handleLogin\"\n      >\n        登录\n      </button>\n    </view>\n    \n    <view class=\"login-footer\">\n      <text>© 2025 校园社团管理系统</text>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport apiModule from '@/api/api.js';\n\n// 登录表单数据\nconst username = ref('');\nconst password = ref('');\n\n/**\n * @description 管理员登录\n */\nconst handleLogin = async () => {\n  if (!username.value || !password.value) {\n    uni.showToast({\n      title: '账号密码不能为空',\n      icon: 'none'\n    });\n    return;\n  }\n  \n  try {\n    uni.showLoading({ title: '登录中...' });\n    \n    const response = await apiModule.admin.login({\n      username: username.value,\n      password: password.value\n    });\n    \n    if (response.code === 200) {\n      // 存储管理员token和信息\n      uni.setStorageSync('adminToken', response.data.token);\n      uni.setStorageSync('adminInfo', response.data);\n      \n      // 跳转到管理员首页\n      uni.reLaunch({\n        url: '/pages/admin/index'\n      });\n      \n      uni.showToast({\n        title: '登录成功',\n        icon: 'success'\n      });\n    } else {\n      uni.showToast({\n        title: response.message || '登录失败',\n        icon: 'none'\n      });\n    }\n  } catch (error) {\n    console.error('登录失败:', error);\n    // request.js已经显示了错误提示，这里不需要再显示\n    // 只需要确保loading被关闭即可\n  } finally {\n    uni.hideLoading();\n  }\n};\n\nonLoad(() => {\n  // 检查是否已登录\n  const token = uni.getStorageSync('adminToken');\n  if (token) {\n    uni.reLaunch({\n      url: '/pages/admin/index'\n    });\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.login-container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background-color: #f5f5f5;\n}\n\n.login-header {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 80rpx 0;\n  \n  .login-logo {\n    width: 150rpx;\n    height: 150rpx;\n    margin-bottom: 30rpx;\n  }\n  \n  .login-title {\n    font-size: 36rpx;\n    font-weight: bold;\n    color: #333;\n  }\n}\n\n.login-form {\n  padding: 0 50rpx;\n  \n  .input-group {\n    display: flex;\n    align-items: center;\n    background-color: #fff;\n    border-radius: 8rpx;\n    padding: 24rpx 30rpx;\n    margin-bottom: 30rpx;\n    box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n    \n    .input {\n      flex: 1;\n      height: 40rpx;\n      margin-left: 20rpx;\n      font-size: 28rpx;\n    }\n  }\n  \n  .login-button {\n    width: 100%;\n    height: 90rpx;\n    line-height: 90rpx;\n    background-color: #2979ff;\n    color: #fff;\n    border-radius: 8rpx;\n    font-size: 32rpx;\n    margin-top: 50rpx;\n    box-shadow: 0 2rpx 10rpx rgba(41, 121, 255, 0.2);\n    \n    &.button-disabled {\n      background-color: #cccccc;\n      box-shadow: none;\n    }\n  }\n}\n\n.login-footer {\n  margin-top: auto;\n  padding: 40rpx 0;\n  display: flex;\n  justify-content: center;\n  \n  text {\n    font-size: 24rpx;\n    color: #999;\n  }\n}\n</style> ","import MiniProgramPage from 'D:/CODE/capstone-project/club-master/club/club_uniapp/pages/admin/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","apiModule","onLoad"],"mappings":";;;;;;;;;;;;;;;AAmDA,UAAM,WAAWA,cAAAA,IAAI,EAAE;AACvB,UAAM,WAAWA,cAAAA,IAAI,EAAE;AAKvB,UAAM,cAAc,YAAY;AAC9B,UAAI,CAAC,SAAS,SAAS,CAAC,SAAS,OAAO;AACtCC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,UAAI;AACFA,sBAAAA,MAAI,YAAY,EAAE,OAAO,SAAU,CAAA;AAEnC,cAAM,WAAW,MAAMC,kBAAU,MAAM,MAAM;AAAA,UAC3C,UAAU,SAAS;AAAA,UACnB,UAAU,SAAS;AAAA,QACzB,CAAK;AAED,YAAI,SAAS,SAAS,KAAK;AAEzBD,wBAAG,MAAC,eAAe,cAAc,SAAS,KAAK,KAAK;AACpDA,wBAAAA,MAAI,eAAe,aAAa,SAAS,IAAI;AAG7CA,wBAAAA,MAAI,SAAS;AAAA,YACX,KAAK;AAAA,UACb,CAAO;AAEDA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACd,CAAO;AAAA,QACP,OAAW;AACLA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,SAAS,WAAW;AAAA,YAC3B,MAAM;AAAA,UACd,CAAO;AAAA,QACF;AAAA,MACF,SAAQ,OAAO;AACdA,0EAAc,SAAS,KAAK;AAAA,MAGhC,UAAY;AACRA,sBAAG,MAAC,YAAW;AAAA,MAChB;AAAA,IACH;AAEAE,kBAAAA,OAAO,MAAM;AAEX,YAAM,QAAQF,cAAAA,MAAI,eAAe,YAAY;AAC7C,UAAI,OAAO;AACTA,sBAAAA,MAAI,SAAS;AAAA,UACX,KAAK;AAAA,QACX,CAAK;AAAA,MACF;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;AC9GD,GAAG,WAAW,eAAe;"}