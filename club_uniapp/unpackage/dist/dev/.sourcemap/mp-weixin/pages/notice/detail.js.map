{"version":3,"file":"detail.js","sources":["pages/notice/detail.vue","../../../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbm90aWNlL2RldGFpbC52dWU"],"sourcesContent":["<template>\n  <view class=\"notice-detail-container pageBg\">\n    <CustomNavBar title=\"公告详情\" backButton />\n    <view v-if=\"!notice\" class=\"empty\">公告不存在或已删除</view>\n    <view v-else class=\"notice-detail\">\n      <view class=\"notice-title\">{{ notice.title }}</view>\n      <view class=\"notice-meta\">\n        <text class=\"notice-time\">{{ formatDateTime(notice.createTime) }}</text>\n        <text v-if=\"notice.publisherName\" class=\"notice-publisher\">{{ notice.publisherName }}</text>\n        <view class=\"view-count\">\n          <uni-icons type=\"eye\" size=\"14\" color=\"#999\"></uni-icons>\n          <text>{{ notice.viewCount || 0 }}</text>\n        </view>\n      </view>\n      \n      <image \n        v-if=\"notice.coverImage\" \n        class=\"cover-image\" \n        :src=\"notice.coverImage\" \n        mode=\"widthFix\" \n        @click=\"previewImage(notice.coverImage)\"\n      ></image>\n      \n      <rich-text v-if=\"notice && notice.content\" :nodes=\"notice.content\" class=\"notice-content\"></rich-text>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport CustomNavBar from '@/components/custom-nav-bar/custom-nav-bar.vue'\nimport { formatDate } from '@/utils/common.js'\nimport api from '@/api/api.js'\nconst notice = ref(null)\n\nconst formatDateTime = (timestamp) => {\n  if (!timestamp) return ''\n  return formatDate(Number(timestamp))\n}\n\nconst previewImage = (url) => {\n  uni.previewImage({\n    urls: [url],\n    current: url\n  })\n}\n\nconst getNoticeDetail = async (id) => {\n  try {\n    const res = await api.notice.getNoticeDetail(id)\n    if (res.code === 200) {\n      notice.value = res.data\n    }\n  } catch (e) {\n    uni.showToast({ title: '获取公告详情失败', icon: 'none' })\n  }\n}\n\nonMounted(() => {\n  const pages = getCurrentPages()\n  const current = pages[pages.length - 1]\n  let id = null\n  if (current.options && current.options.id) id = current.options.id\n  else if (current.$route && current.$route.query.id) id = current.$route.query.id\n  if (id) getNoticeDetail(id)\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.notice-detail-container {\n  min-height: 100vh;\n  .notice-detail {\n    background: #fff;\n    border-radius: 12rpx;\n    box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.04);\n    padding: 40rpx 30rpx 30rpx 30rpx;\n    margin: 30rpx;\n    .notice-title {\n      font-size: 36rpx;\n      font-weight: bold;\n      color: #2979ff;\n      margin-bottom: 18rpx;\n    }\n    .notice-meta {\n      display: flex;\n      font-size: 24rpx;\n      color: #999;\n      margin-bottom: 24rpx;\n      align-items: center;\n      \n      .notice-time {\n        margin-right: 20rpx;\n      }\n      \n      .notice-publisher {\n        margin-right: 20rpx;\n      }\n      \n      .view-count {\n        margin-left: auto;\n        display: flex;\n        align-items: center;\n        \n        uni-icons {\n          margin-right: 6rpx;\n      }\n    }\n    }\n    \n    .cover-image {\n      width: 100%;\n      border-radius: 8rpx;\n      margin-bottom: 24rpx;\n    }\n    \n    .notice-content {\n      font-size: 30rpx;\n      color: #333;\n      line-height: 1.8;\n      margin-top: 10rpx;\n      word-break: break-all;\n    }\n  }\n  .empty {\n    text-align: center;\n    color: #999;\n    margin-top: 120rpx;\n  }\n}\n</style>","import MiniProgramPage from 'D:/CODE/capstone-project/club-master/club/club_uniapp/pages/notice/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","formatDate","uni","api","onMounted"],"mappings":";;;;;;;;;;;;AA8BA,MAAM,eAAe,MAAW;;;;AAGhC,UAAM,SAASA,cAAG,IAAC,IAAI;AAEvB,UAAM,iBAAiB,CAAC,cAAc;AACpC,UAAI,CAAC;AAAW,eAAO;AACvB,aAAOC,aAAU,WAAC,OAAO,SAAS,CAAC;AAAA,IACrC;AAEA,UAAM,eAAe,CAAC,QAAQ;AAC5BC,oBAAAA,MAAI,aAAa;AAAA,QACf,MAAM,CAAC,GAAG;AAAA,QACV,SAAS;AAAA,MACb,CAAG;AAAA,IACH;AAEA,UAAM,kBAAkB,OAAO,OAAO;AACpC,UAAI;AACF,cAAM,MAAM,MAAMC,QAAAA,UAAI,OAAO,gBAAgB,EAAE;AAC/C,YAAI,IAAI,SAAS,KAAK;AACpB,iBAAO,QAAQ,IAAI;AAAA,QACpB;AAAA,MACF,SAAQ,GAAG;AACVD,sBAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,QAAQ;AAAA,MAClD;AAAA,IACH;AAEAE,kBAAAA,UAAU,MAAM;AACd,YAAM,QAAQ,gBAAiB;AAC/B,YAAM,UAAU,MAAM,MAAM,SAAS,CAAC;AACtC,UAAI,KAAK;AACT,UAAI,QAAQ,WAAW,QAAQ,QAAQ;AAAI,aAAK,QAAQ,QAAQ;AAAA,eACvD,QAAQ,UAAU,QAAQ,OAAO,MAAM;AAAI,aAAK,QAAQ,OAAO,MAAM;AAC9E,UAAI;AAAI,wBAAgB,EAAE;AAAA,IAC5B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChED,GAAG,WAAW,eAAe;"}