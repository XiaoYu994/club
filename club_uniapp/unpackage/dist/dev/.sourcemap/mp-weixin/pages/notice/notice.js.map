{"version":3,"file":"notice.js","sources":["pages/notice/notice.vue","../../../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbm90aWNlL25vdGljZS52dWU"],"sourcesContent":["<template>\n  <view class=\"notice-list-container pageBg\">\n    <!-- #ifndef MP-TOUTIAO -->\n    <custom-nav-bar title=\"公告\"></custom-nav-bar>\n    <!-- #endif -->\n    <view class=\"notice-list\">\n      <view v-if=\"noticeList.length === 0\" class=\"empty\">暂无公告</view>\n      <view v-for=\"item in noticeList\" :key=\"item.id\" class=\"notice-item\" :class=\"{ 'top-notice': item.isTop === 1 }\" @click=\"goDetail(item)\">\n        <view class=\"notice-header\">\n          <view class=\"title-wrapper\">\n            <view v-if=\"item.isTop === 1\" class=\"top-badge\">\n              <uni-icons type=\"star\" size=\"14\" color=\"#ff6b35\"></uni-icons>\n              <text>置顶</text>\n            </view>\n            <view class=\"notice-title\">{{ item.title }}</view>\n          </view>\n        </view>\n        <view class=\"notice-meta\">\n          <text class=\"notice-time\">{{ formatDateTime(item.createTime) }}</text>\n          <text v-if=\"item.publisherName\" class=\"notice-publisher\">{{ item.publisherName }}</text>\n          <view class=\"view-count\">\n            <uni-icons type=\"eye\" size=\"14\" color=\"#999\"></uni-icons>\n            <text>{{ item.viewCount || 0 }}</text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport CustomNavBar from '@/components/custom-nav-bar/custom-nav-bar.vue'\nimport { formatDate } from '@/utils/common.js'\nimport api from '@/api/api.js'\nconst noticeList = ref([])\n\nconst formatDateTime = (timestamp) => {\n  if (!timestamp) return ''\n  return formatDate(Number(timestamp))\n}\n\nconst getNoticeList = async () => {\n  try {\n    const res = await api.notice.getNoticeList({ pageNo: 1, pageSize: 20, orderBy: 'is_top', isAsc: false })\n    if (res.code === 200) {\n      noticeList.value = res.data.list || []\n    }\n  } catch (e) {\n    uni.showToast({ title: '获取公告失败', icon: 'none' })\n  }\n}\n\nconst goDetail = (item) => {\n  uni.navigateTo({ url: `/pages/notice/detail?id=${item.id}` })\n}\n\nonMounted(() => {\n  getNoticeList()\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.notice-list-container {\n  min-height: 100vh;\n  \n  .notice-list {\n    padding: 20rpx 30rpx;\n    \n    .empty {\n      text-align: center;\n      color: #999;\n      margin-top: 120rpx;\n    }\n    \n    .notice-item {\n      background: #fff;\n      border-radius: 12rpx;\n      box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.04);\n      padding: 20rpx 24rpx;\n      margin-bottom: 24rpx;\n      \n      // 置顶公告样式\n      &.top-notice {\n        border: 2rpx solid #ff6b35;\n        background: linear-gradient(135deg, #fff9f7 0%, #ffffff 100%);\n        \n        .notice-title {\n          color: #ff6b35;\n        }\n      }\n      \n      .notice-header {\n        .title-wrapper {\n          .top-badge {\n            display: flex;\n            align-items: center;\n            margin-bottom: 8rpx;\n            \n            text {\n              margin-left: 6rpx;\n              font-size: 24rpx;\n              color: #ff6b35;\n              font-weight: 500;\n            }\n          }\n        }\n      }\n      \n      .notice-title {\n        font-size: 32rpx;\n        color: #333;\n        font-weight: bold;\n        margin-bottom: 10rpx;\n        line-height: 1.3;\n      }\n      \n      .notice-meta {\n        display: flex;\n        align-items: center;\n        font-size: 24rpx;\n        color: #999;\n        \n        .notice-time {\n          margin-right: 20rpx;\n        }\n        \n        .notice-publisher {\n          margin-right: 20rpx;\n        }\n        \n        .view-count {\n          margin-left: auto;\n          display: flex;\n          align-items: center;\n          \n          uni-icons {\n            margin-right: 6rpx;\n          }\n        }\n      }\n    }\n  }\n}\n</style>","import MiniProgramPage from 'D:/CODE/capstone-project/club-master/club/club_uniapp/pages/notice/notice.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","formatDate","api","uni","onMounted"],"mappings":";;;;;;;;;;;;AAgCA,MAAM,eAAe,MAAW;;;;AAGhC,UAAM,aAAaA,cAAG,IAAC,EAAE;AAEzB,UAAM,iBAAiB,CAAC,cAAc;AACpC,UAAI,CAAC;AAAW,eAAO;AACvB,aAAOC,aAAU,WAAC,OAAO,SAAS,CAAC;AAAA,IACrC;AAEA,UAAM,gBAAgB,YAAY;AAChC,UAAI;AACF,cAAM,MAAM,MAAMC,QAAAA,UAAI,OAAO,cAAc,EAAE,QAAQ,GAAG,UAAU,IAAI,SAAS,UAAU,OAAO,MAAK,CAAE;AACvG,YAAI,IAAI,SAAS,KAAK;AACpB,qBAAW,QAAQ,IAAI,KAAK,QAAQ,CAAE;AAAA,QACvC;AAAA,MACF,SAAQ,GAAG;AACVC,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAAA,MAChD;AAAA,IACH;AAEA,UAAM,WAAW,CAAC,SAAS;AACzBA,0BAAI,WAAW,EAAE,KAAK,2BAA2B,KAAK,EAAE,IAAI;AAAA,IAC9D;AAEAC,kBAAAA,UAAU,MAAM;AACd,oBAAe;AAAA,IACjB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1DD,GAAG,WAAW,eAAe;"}