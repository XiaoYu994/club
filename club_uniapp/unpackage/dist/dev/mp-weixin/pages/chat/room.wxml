<view class="{{['chat-room-container', 'pageBg', 'data-v-bc4afd2d', y && 'panel-open']}}"><custom-nav-bar wx:if="{{a}}" class="data-v-bc4afd2d" u-i="bc4afd2d-0" bind:__l="__l" u-p="{{a}}"></custom-nav-bar><scroll-view class="chat-list data-v-bc4afd2d" scroll-y bindscrolltoupper="{{e}}" upper-threshold="50" scroll-with-animation show-scrollbar="false" scroll-into-view="{{f}}"><view wx:if="{{b}}" class="load-more data-v-bc4afd2d"><view class="loading-icon data-v-bc4afd2d"></view><text class="data-v-bc4afd2d">正在加载更多...</text></view><view wx:elif="{{c}}" class="load-more data-v-bc4afd2d"><text class="data-v-bc4afd2d">没有更多消息了</text></view><view class="messages-container data-v-bc4afd2d"><view wx:for="{{d}}" wx:for-item="msg" wx:key="U" id="{{msg.V}}" class="message-item data-v-bc4afd2d"><view wx:if="{{msg.a}}" class="time-divider data-v-bc4afd2d"><text class="data-v-bc4afd2d">{{msg.b}}</text></view><view class="{{['data-v-bc4afd2d', 'message-row', msg.T]}}"><block wx:if="{{msg.c}}"><view class="avatar-container data-v-bc4afd2d"><image class="avatar data-v-bc4afd2d" src="{{msg.d}}" mode="aspectFill"/></view><view class="message-content data-v-bc4afd2d"><view class="sender-name data-v-bc4afd2d">{{msg.e}}</view><view class="bubble data-v-bc4afd2d"><block wx:if="{{msg.f}}"><text class="text data-v-bc4afd2d">{{msg.g}}</text></block><block wx:elif="{{msg.h}}"><image class="image data-v-bc4afd2d" src="{{msg.i}}" bindtap="{{msg.j}}" mode="widthFix"/></block><block wx:elif="{{msg.k}}"><view class="file-box data-v-bc4afd2d" bindtap="{{msg.o}}"><uni-icons wx:if="{{msg.m}}" class="data-v-bc4afd2d" u-i="{{msg.l}}" bind:__l="__l" u-p="{{msg.m}}"/><text class="file-name data-v-bc4afd2d">{{msg.n}}</text></view></block><block wx:elif="{{msg.p}}"><view class="location-box data-v-bc4afd2d" bindtap="{{msg.t}}"><uni-icons wx:if="{{msg.r}}" class="data-v-bc4afd2d" u-i="{{msg.q}}" bind:__l="__l" u-p="{{msg.r}}"/><text class="location-name data-v-bc4afd2d">{{msg.s}}</text></view></block><block wx:elif="{{msg.v}}"><view class="custom-box data-v-bc4afd2d"><uni-icons wx:if="{{msg.x}}" class="data-v-bc4afd2d" u-i="{{msg.w}}" bind:__l="__l" u-p="{{msg.x}}"/><text class="custom-text data-v-bc4afd2d">自定义消息</text></view></block></view><view class="time data-v-bc4afd2d">{{msg.y}}</view></view></block><block wx:else><view class="message-content self data-v-bc4afd2d"><view class="bubble data-v-bc4afd2d"><block wx:if="{{msg.z}}"><text class="text data-v-bc4afd2d">{{msg.A}}</text></block><block wx:elif="{{msg.B}}"><image class="image data-v-bc4afd2d" src="{{msg.C}}" bindtap="{{msg.D}}" mode="widthFix"/></block><block wx:elif="{{msg.E}}"><view class="file-box data-v-bc4afd2d" bindtap="{{msg.I}}"><uni-icons wx:if="{{msg.G}}" class="data-v-bc4afd2d" u-i="{{msg.F}}" bind:__l="__l" u-p="{{msg.G}}"/><text class="file-name data-v-bc4afd2d">{{msg.H}}</text></view></block><block wx:elif="{{msg.J}}"><view class="location-box data-v-bc4afd2d" bindtap="{{msg.N}}"><uni-icons wx:if="{{msg.L}}" class="data-v-bc4afd2d" u-i="{{msg.K}}" bind:__l="__l" u-p="{{msg.L}}"/><text class="location-name data-v-bc4afd2d">{{msg.M}}</text></view></block><block wx:elif="{{msg.O}}"><view class="custom-box data-v-bc4afd2d"><uni-icons wx:if="{{msg.Q}}" class="data-v-bc4afd2d" u-i="{{msg.P}}" bind:__l="__l" u-p="{{msg.Q}}"/><text class="custom-text data-v-bc4afd2d">自定义消息</text></view></block></view><view class="time data-v-bc4afd2d">{{msg.R}}</view></view><view class="avatar-container data-v-bc4afd2d"><image class="avatar data-v-bc4afd2d" src="{{msg.S}}" mode="aspectFill"/></view></block></view></view></view></scroll-view><view class="{{['input-area', 'data-v-bc4afd2d', p && 'with-panel']}}"><view class="more-btn data-v-bc4afd2d" bindtap="{{h}}"><uni-icons wx:if="{{g}}" class="data-v-bc4afd2d" u-i="bc4afd2d-7" bind:__l="__l" u-p="{{g}}"></uni-icons></view><view class="input-wrapper data-v-bc4afd2d"><block wx:if="{{r0}}"><textarea class="message-input data-v-bc4afd2d" auto-height maxlength="{{500}}" cursor-spacing="{{20}}" show-confirm-bar="{{false}}" bindinput="{{i}}" bindfocus="{{j}}" bindblur="{{k}}" placeholder="请输入消息..." value="{{l}}"></textarea></block></view><view bindtap="{{n}}" class="{{['send-btn', 'data-v-bc4afd2d', o && 'active']}}"><uni-icons wx:if="{{m}}" class="data-v-bc4afd2d" u-i="bc4afd2d-8" bind:__l="__l" u-p="{{m}}"></uni-icons></view></view><view wx:if="{{q}}" class="more-panel data-v-bc4afd2d"><view class="panel-item data-v-bc4afd2d" bindtap="{{s}}"><view class="panel-icon data-v-bc4afd2d"><uni-icons wx:if="{{r}}" class="data-v-bc4afd2d" u-i="bc4afd2d-9" bind:__l="__l" u-p="{{r}}"></uni-icons></view><text class="data-v-bc4afd2d">图片</text></view><view class="panel-item data-v-bc4afd2d" bindtap="{{v}}"><view class="panel-icon data-v-bc4afd2d"><uni-icons wx:if="{{t}}" class="data-v-bc4afd2d" u-i="bc4afd2d-10" bind:__l="__l" u-p="{{t}}"></uni-icons></view><text class="data-v-bc4afd2d">位置</text></view><view class="panel-item data-v-bc4afd2d" bindtap="{{x}}"><view class="panel-icon data-v-bc4afd2d"><uni-icons wx:if="{{w}}" class="data-v-bc4afd2d" u-i="bc4afd2d-11" bind:__l="__l" u-p="{{w}}"></uni-icons></view><text class="data-v-bc4afd2d">文件</text></view></view></view>